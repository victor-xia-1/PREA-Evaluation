# PREA Compliance and Sexual Victimization Analysis

This repository contains R scripts for analyzing the relationship between Prison Rape Elimination Act (PREA) compliance and sexual victimization rates in U.S. state correctional facilities.

## Overview

The analysis examines inmate-on-inmate and staff-on-inmate sexual victimization rates (both alleged and substantiated) from 2012-2020, and their relationship with:
- Cumulative years of PREA compliance
- State population
- Incarceration rates
- Violent crime rates
- Correctional staffing ratios

## Project Structure

### Data Extraction Scripts
- `01_build_prea_dataset.R` - Initial data extraction and cleaning
- `10_extract_all_states_per_1000.R` - Extract alleged/substantiated rates per 1000 for all states
- `17_build_correctional_staffing.R` - Extract correctional officer employment data from BLS
- `18_extract_staff_on_inmate_per_1000.R` - Extract staff-on-inmate incident rates
- `20_extract_annual_state_counts.R` - Extract annual state counts

### Visualization Scripts
- `02_interactive_prea_visualization.R` - Interactive visualizations for alleged nonconsensual acts
- `04_interactive_prea_abusive_visualization.R` - Interactive visualizations for substantiated abusive contact
- `07_build_prea_prevalence_ratios.R` - Calculate and visualize prevalence ratios
- `08_interactive_prea_prevalence_ratios.R` - Interactive prevalence ratio visualizations
- `24_create_alleged_heatmap_2012_2020.R` - Heatmap of alleged incidents per 1000
- `25_create_substantiated_heatmap_2012_2020.R` - Heatmap of substantiated incidents per 1000

### Analysis Scripts
- `11_regress_alleged_on_prea_compliance.R` - Simple regression of alleged rates on PREA compliance
- `12_regress_substantiated_on_prea_compliance.R` - Simple regression of substantiated rates on PREA compliance
- `13_regress_with_population_covariate.R` - Regression with population covariate
- `14_regress_with_additional_covariates.R` - **Main analysis**: Panel regression with two-way fixed effects
- `15_normalize_alleged_rates.R` - Normalize rates using z-scores, min-max, percentile rank
- `16_regress_zscores_on_compliance.R` - Regression of normalized rates
- `19_regress_staff_on_inmate_with_covariates.R` - Staff-on-inmate regression analysis

### Output Generation
- `23_create_latex_regression_table.R` - Generate LaTeX table of regression results

## Key Findings

The main analysis (`14_regress_with_additional_covariates.R`) uses panel data regression with:
- **Two-way fixed effects** (state + year)
- **Clustered standard errors** (at state level)
- **Cumulative years of PREA compliance** as the treatment variable

**Key Result**: Cumulative years of PREA compliance is associated with a statistically significant reduction in substantiated sexual victimization rates (Î² = -0.331 per 1,000, p = 0.047).

## Data Sources

- **PREA Data**: `PREA Data 102125.xlsx` - Sexual victimization incident data by state and year
- **BLS Occupational Data**: Correctional officer employment counts by state
- **USArrests**: State-level violent crime rates
- **State Population**: U.S. Census data

## Requirements

R packages required:
- `readxl` - Read Excel files
- `dplyr`, `tidyr` - Data manipulation
- `ggplot2`, `plotly` - Visualization
- `sandwich`, `lmtest` - Clustered standard errors
- `broom` - Tidy regression output
- `readr` - Read/write CSV files
- `stringr` - String manipulation
- `htmlwidgets` - Save interactive plots

## Usage

1. Ensure data files are in the appropriate directories
2. Run scripts in numerical order (01, 02, 03, etc.) for complete analysis
3. Main regression results are in `14_regress_with_additional_covariates.R`
4. LaTeX table output is generated by `23_create_latex_regression_table.R`

## Output Files

- Regression results: `data/clean/regression_*.csv`
- LaTeX table: `data/clean/regression_table_cumulative_2012_2020.tex`
- Visualizations: `figures/` directory
- Cleaned data: `data/clean/` directory

## Note

Data files (Excel, CSV, PDF) are excluded from this repository via `.gitignore` due to size and privacy considerations. Only R scripts and documentation are version controlled.

